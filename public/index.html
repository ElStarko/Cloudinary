<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cloudinary Uploader</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .link-box { margin-top: 10px; padding: 10px; border: 1px solid #ddd; background: #f9f9f9; }
    .link-box a { color: blue; text-decoration: underline; }
  </style>
</head>
<body>
  <h2>Upload Files to Cloudinary</h2>

  <form id="uploadForm">
    <input type="file" name="files" id="files" multiple />
    <button type="submit">Upload</button>
  </form>

  <h3>Uploaded Links</h3>
  <div id="results"></div>

  <script>
    const form = document.getElementById("uploadForm");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      
      const files = document.getElementById("files").files;
      if (files.length === 0) {
        alert("Please select at least one file!");
        return;
      }

      const formData = new FormData();
      for (let file of files) {
        formData.append("images", file);
      }

      const res = await fetch("/upload-multiple", {
        method: "POST",
        body: formData,
      });

      const data = await res.json();
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      if (data.urls) {
        data.urls.forEach((url) => {
          const linkBox = document.createElement("div");
          linkBox.className = "link-box";
          linkBox.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
          resultsDiv.appendChild(linkBox);
        });
      } else {
        resultsDiv.innerHTML = `<p style="color:red;">Error: ${data.error}</p>`;
      }
    });
  </script>
</body>
</html>
